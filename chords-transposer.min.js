!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ChordsTransposer={})}(this,(function(t){"use strict";const e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],s=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];class n{constructor(t){this.chords=this.parse(t),this.song=t}findChords(t,e){const s=/[A-Ga-g](#|b|&)?m?\+?(sus|add|maj|dim|aug)?[0-9]?( *(-|\/) *[A-G](#|b|&)?)? */g;if(!t.replace(/\||\t|\-|\/|\(|\)|\,|\s/g," ").replace(/[\[\]']+/g," ").trim().match(/^ *[A-Ga-g](#|b|&)?m?\+?(sus|add|maj|dim|aug)?[0-9]?( *(-|\/) *[A-G](#|b)?)?( +[A-Ga-g](#|b|&)?m?\+?(sus|add|maj|dim|aug)?[0-9]?( *(-|\/) *[A-G](#|b|&)?)? *)* *$/g))return[];const n=[];let o;for(;null!==(o=s.exec(t));)n.push({chord:o[0].trim(),position:o.index+e});return n}parse(t){const e=t.split(/\r\n|\r|\n/g);let s=0;const n=[];for(let t=0;t<e.length;t++)n.push(...this.findChords(e[t],s)),s+=e[t].length+1;return n}getWithTags(){let t=0;const e='<span class="chords-highlighted">',s="</span>";let n=this.song;return this.chords.forEach((o=>{const i=o.position+t;let r=i;for(;r<n.length&&!n[r].match(/\s/);)r++;n=n.slice(0,i)+e+o.chord+s+n.slice(r),t+=40+o.chord.length-(r-i)})),n}shiftScale(t){let n=null;return this.chords.map((o=>{null===n&&(n=-1!==e.indexOf(o.chord)?e:s);let i=o.chord,r=!1;"m"===o.chord[o.chord.length-1]&&(i=o.chord.slice(0,o.chord.length-1),r=!0);let h=n.indexOf(i)+t;return h<0?h=(n.length+h)%n.length:h%=n.length,{chord:`${n[h]}${r?"m":""}`,position:o.position}}))}shiftScaleBy(t){return this.chords=this.shiftScale(t),this}shiftScaleFromTo(t,n){const o=-1!==e.indexOf(t)&&-1!==e.indexOf(n)?e:s,i=o.indexOf(n)-o.indexOf(t);return this.chords=this.shiftScale(i),this}}t.Transpose=n,t.default=n,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=chords-transposer.min.js.map
