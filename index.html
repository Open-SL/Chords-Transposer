<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Guitar Chords</title>
    <meta name="description" content="Guitar Chords">
    <meta name="author" content="Nadun">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.min.css" />
    <!--[if lt IE 9]>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.ie.min.css" />
    <![endif]-->
    <link rel="stylesheet" href="https://oss.maxcdn.com/libs/normalize-css/3.0.0/normalize.min.css">
    <link rel="stylesheet" href="./styles.css">

</head>

<body>
    <a class="github-fork-ribbon right-top fixed" href="https://github.com/Open-SL/Chords-Transposer" title="Fork me on GitHub">Fork
        me on GitHub</a>
    <div class="content">

        <h1>Chords Transposer</h1>
        <p>
            Chords Transposer can manipulate guitar chords in many ways such as Guitar Chords parsing and Transposing.
        </p>
        <h2>Usage</h2>
        <p>
            <ul style="list-style-type:circle">
                <li>Click parse to filter raw song into chords and song lines.</li>
                <li>Click Transpose G# to transpose song from this scale to given scale (in this scenario G to G#)</li>
                <li>Click Transpose +1 to increase scale by 1 semitone</li>
                <li>Click Transpose -1 to decrease scale by 1 semitone</li>
            </ul>
        </p>
        <textarea id="src_id" cols="67" rows="20" placeholder="Raw song(s) to parse"></textarea><br />
        <input type="button" value="Parse" onclick="parse('src_id','dst_id')" />
        <input type="button" value="Transpose to G#" onclick="shift('src_id','dst_id','G','G#')" />
        <input type="button" value="Transpose +1" onclick="shiftPlus('src_id','dst_id')" />
        <input type="button" value="Transpose -1" onclick="shiftMinus('src_id','dst_id')" />

        <script src="dist/chords.js"></script>
        <pre id="dst_id">

[comment]
This is a comment.
[/comment]

[tab]
e|--------------------------------------------------------|
B|--------------------------------------------------------|
G|--------------------------------------------------------|
D|--------------------------------------------------------|
A|--------------------------------------------------------|
E|--------------------------------------------------------|
[/tab]

Intro
| D   | D   | C   | C   | G   | G   | D   | D   |
| D   | D   | C   | C   | G   | G   | D   | D   |
| D   | D   | C   | C   | G   | G   | D   | D   |

D
She's got a smile that it seems to me
  C
Reminds me of childhood memories
       G
Where everything
                                D
Was as fresh as a bright blue sky
D
Now and then when I see her face
    C
She takes me away to that special place
         G
And if I stared too long
                              D
I'd probably break down and cry

[chorus]
A               C              D
Whoa oh, sweet child o' mine
A               C              D
Whoa, oh, oh, oh sweet love o' mine
[/chorus]

[Instrumental]
| D   | D   | C   | C   | G   | G   | D   | D   |


D
She's got eyes of the bluest skies
   C
As if they thought of rain
    G
I'd hate to look into those eyes
    D
And see an ounce of pain
    D
Her hair reminds me of a warm safe place
      C
Where as a child I'd hide
    G
And pray for the thunder and rain
     D
To quietly pass me by


[chorus]
A        C              D
Whoa oh, oh, sweet child o' mine
A              C                D
Whoa, oh, oh, oh sweet love o' mine
[/chorus]


    </pre>
        <h2>About</h2>
        <p>
            Chords Transposer was written by
            <a href="https://github.com/nadunindunil">Nadun indunil</a>.
        </p>
    </div>
    <script>
        val = 0;

        function shift(src_id, dst_id, from, to) {
            val = 0;
            var src = document.getElementById(src_id).value;
            var dst = document.getElementById(dst_id);
            dst.innerHTML = chords.shiftScale(src, from, to);
            applyStyles(dst_id);
        }

        function shiftPlus(src_id, dst_id) {
            val += 1;
            var src = document.getElementById(src_id).value;
            var dst = document.getElementById(dst_id);
            dst.innerHTML = chords.shiftScaleBy(src, val);
            applyStyles(dst_id);
        }

        function shiftMinus(src_id, dst_id) {
            val -= 1;
            var src = document.getElementById(src_id).value;
            var dst = document.getElementById(dst_id);
            dst.innerHTML = chords.shiftScaleBy(src, val);
            applyStyles(dst_id);
        }

        function parse(src_id, dst_id) {
            val = 0;
            var src = document.getElementById(src_id).value;
            var dst = document.getElementById(dst_id);
            dst.innerHTML = chords.parse(src);
            applyStyles(dst_id);
        }

        function applyStyles(dst_id) {
            var dst = document.getElementById(dst_id);

            // Get the content of the <pre> element
            var content = dst.innerHTML;

            // Replace [tab] with <span class="tab">
            content = content.replace(/\[tab\]/g, '<span class="tab">');
            content = content.replace(/\[\/tab\]/g, '</span>');

            // Replace [tab] with <span class="tab">
            content = content.replace(/\[comment\]/g, '<span class="comment">');
            content = content.replace(/\[\/comment\]/g, '</span>');

            // Replace [chorus]...[/chorus] with <span class="chorus">...</span>
            content = content.replace(/\[chorus\]([\s\S]*?)\[\/chorus\]/g, function (match, chorusContent) {
                var chorusLines = chorusContent.trim().split('\n').map(function (line) {
                    return '<span class="chorus">' + line + '</span>';
                });
                return chorusLines.join('\n');
            });

            // Update the content of the <pre> element
            dst.innerHTML = content;
        }
    </script>
</body>

</html>
